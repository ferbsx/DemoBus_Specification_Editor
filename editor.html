<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>DomoBus Specification Editor</title>

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <style>
  body,h1,h2,h3,h4,h5,h6 {font-family: "Lato", sans-serif}
  .w3-bar,h1,button {font-family: "Montserrat", sans-serif}
  .fa-anchor,.fa-coffee {font-size:200px}
  </style>

  <script type="text/javascript">
  // Used to toggle the menu on small screens when clicking on the menu button
  function myFunction() {
    var x = document.getElementById("navDemo");
    if (x.className.indexOf("w3-show") == -1) {
      x.className += " w3-show";
    } else {
      x.className = x.className.replace(" w3-show", "");
    }
  }

  window.file = '';
  </script>
<body>

  <!-- Navbar -->
  <div class="w3-top">
    <div class="w3-bar w3-yellow w3-card w3-left-align w3-large">
      <a class="w3-bar-item w3-button w3-hide-medium w3-hide-large w3-right w3-padding-large w3-hover-white w3-large w3-yellow" href="javascript:void(0);" onclick="myFunction()" title="Toggle Navigation Menu"><i class="fa fa-bars"></i></a>
      <a href="./index.html" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">Home</a>
      <a href="#" class="w3-bar-item w3-button w3-padding-large w3-white">Editor</a>
      <a href="./domobus.html" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">More about DemoBus</a>
      <a href="./documentation.html" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">Documentation</a>
      <a href="./contact.html" class="w3-bar-item w3-button w3-hide-small w3-padding-large w3-hover-white">Contact</a>
    </div>

    <!-- Navbar on small screens -->
    <div id="navDemo" class="w3-bar-block w3-white w3-hide w3-hide-large w3-hide-medium w3-large">
      <a href="./index.html" class="w3-bar-item w3-button w3-padding-large">Home</a>
      <a href="./domobus.html" class="w3-bar-item w3-button w3-padding-large">More about DemoBus</a>
      <a href="./documentation.html" class="w3-bar-item w3-button w3-padding-large">Documentation</a>
      <a href="./contact.html" class="w3-bar-item w3-button w3-padding-large">Contact</a>
    </div>
  </div>

  <!-- Header -->
  <header class="w3-container w3-yellow w3-center" style="padding:128px 16px 60px">
    <h1>DomoBus Specification Editor</h1>
    <p>Do you have an XML file already? Want us to read it so you can edit it here? </p>
    <p>Then just upload your file here:</p>
    <button href="#" class="w3-button w3-black w3-padding-large w3-small w3-margin-top">Upload XML file</button>
  </header>

  <header class="w3-container w3-center" style="padding:20px 16px">
    <h1>Let's start writing/ editing the DomoBus Specification!</h1>
    <!-- <p class="w3-medium">Please press the Submit button after you're done with each section.</p> -->
    <!-- <button href="#" class="w3-button w3-black w3-padding-large w3-small w3-margin-top">Create and Download XML file</button> -->
  </header>

<!-- <h2>Let's start writing/ editing the DomoBus Specification!</h2> -->



<!-- <h3>Domo Bus System Details: </h3> -->
  <form class="w3-container" style="padding:0px 20px 16px">
  <fieldset>
    <legend> <h4>DomoBus System Details: </h4></legend>
    ID:<br>
    <input type="number" name="domobus-sys-id" id="domobus-sys-id" value="123" required=true><br>
    Name:<br>
    <input type="text" id="domobus-sys-name" value="Example System" required=true><br>
    Version:<br>
    <input type="number" id="domobus-sys-version" value="1.0" required=true><br>
    Date:<br>
    <input type="date" id="domobus-sys-date"><br>
    <!-- <input type="button" value="Submit" onclick="addToFile_ds()" class="w3-button w3-yellow w3-padding-large w3-small w3-margin-top"/><br> -->
  </fieldset>
</form>

<!-- <script type="text/javascript">
  function addToFile_ds(){
    window.file += '<DomoBusSystem ID="'+ String(document.getElementById('domobus-sys-id').value) + '" Name="' + String(document.getElementById('domobus-sys-name').value) +'" Version="' + String(document.getElementById('domobus-sys-version').value) +'" Date="' + String(document.getElementById('domobus-sys-date').value) +'">';
    window.file += '<House ID="'+ String(document.getElementById('house-structure-id').value) + '" Name="' + String(document.getElementById('house-name').value) +'" Address="' + String(document.getElementById('house-address').value) +'" Phone="' + String(document.getElementById('house-phone').value) +'">';

  }
</script> -->

<form class="w3-container" style="padding:0px 20px 16px">
<fieldset>
  <legend> <h4>House Details:</h4> </legend>
  ID:<br>
  <input type="number" id="house-structure-id" value="98" required=true><br>
  Name:<br>
  <input type="text" id="house-name" value="Ferdous's home" required=true><br>
  Address:<br>
  <input type="text" id="house-address" value="Street name, house number" required=true size="50"><br>
  Phone:<br>
  <input type="tel" id="house-phone" value="0123456789" required=true><br>
  <!-- <input type="button" value="Submit" onclick="addToFile_hs()" class="w3-button w3-yellow w3-padding-large w3-small w3-margin-top"/><br> -->
</fieldset>
</form>

<!-- <script type="text/javascript">
  function addToFile_hs(){
    // window.file += '<House ID="'+ String(document.getElementById('house-structure-id').value) + '" Name="' + String(document.getElementById('house-name').value) +'" Address="' + String(document.getElementById('house-address').value) +'" Phone="' + String(document.getElementById('house-phone').value) +'">';
  }
</script> -->

<style>
.add_form_field_floor,.add_form_field_access, .add_form_field_division, .add_form_field_user, .add_form_field_service{
    background-color: #1c97f3;
    border: none;
    color: white;
    padding: 8px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin: 4px 2px;
    cursor: pointer;
	border:1px solid #186dad;

}
.delete_access, .delete_floor, .delete_division, .delete_user, .delete_service{
    background-color: #fd1200;
    border: none;
    color: white;
    padding: 5px 15px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 14px;
    margin: 4px 2px;
    cursor: pointer;

}
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script>

window.floornames = new Array();
$(document).ready(function() {
    var max_fields      = 100;
    var wrapper         = $(".floor");
    var add_button      = $(".add_form_field_floor");

    window.floorx = 0;
    $(add_button).click(function(e){
        e.preventDefault();
        window.floornames[0] = String(document.getElementById('floor-name').value);
        if(window.floorx < max_fields){
            var floorName = "floor-name" + window.floorx;
            var floorHeight = "floor-height" + window.floorx;
            // var divisionName = "division-name" + window.floorx;

            $(wrapper).append('<div>Floor name: <br><input type="text" id="'+ floorName +'"><br>Height Order:<br><input type="number" id="'+floorHeight+'"><a href="#" class="delete_floor">Delete this floor</a></div>'); //add input box
            window.floorx++;
        }
		else
		{
		alert('You Reached the limits')
		}
    });

    $(wrapper).on("click",".delete_floor", function(e){
        e.preventDefault(); $(this).parent('div').remove();
        window.floorx--;
        window.floornames.splice(window.floorx,1); //TODO:does this work?
    })
});


function saveFloors(){
  var select = document.getElementById('floor-names');
  select.options.length = 0;
  window.floornames[0] = String(document.getElementById('floor-name').value);
  for (var i = 0; i < window.floorx; i++) {
    window.floornames[i+1] = String(document.getElementById('floor-name' + i).value);
  }

  select = document.getElementById('floor-names');

  window.floornames.forEach(function(item){
    select.options[select.options.length] = new Option(item);
    // var option = document.createElement('option');
    // option.value = item;
    // list.appendChild(option);
  });
};
// TODO: fix the issue of when a floor is added, list updated and then a floor (not the last) is removed, and list updated again


$(document).ready(function() {
    var max_fields      = 100;
    var wrapper         = $(".division");
    var add_button      = $(".add_form_field_division");

    window.divx = 0;
    $(add_button).click(function(e){
        e.preventDefault();
        if(window.divx < max_fields){
            // var floorName = "floor-name" + window.floorx;
            // var floorHeight = "floor-height" + window.floorx;
            var fn = "fn" + window.divx;
            var divisionName = "division-name" + window.divx;
            var s = "floor-names" + window.divx;

            $(wrapper).append('<div>Division name: <br><input type="text" id="'+divisionName+'"><br>On floor: <br><select id="'+s+'"></select><a href="#" class="delete_floor">Delete this floor</a></div>'); //add input box
            window.divx++;
            var sel = document.getElementById(s);

            window.floornames.forEach(function(item){
              sel.options[sel.options.length] = new Option(item);
            });
        }
		else
		{
		alert('You Reached the limits')
		}
    });

    $(wrapper).on("click",".delete_division", function(e){
        e.preventDefault(); $(this).parent('div').remove();
        window.divx--;
    })
});


window.accesslevels = new Array();
$(document).ready(function() {
    var max_fields      = 100;
    var wrapper         = $(".accessLevel");
    var add_button      = $(".add_form_field_access");

    window.acsx = 0;
    $(add_button).click(function(e){
        e.preventDefault();
        window.accesslevels[0] = String(document.getElementById('access_level').value);
        if(window.acsx < max_fields){
            var accessName = "access_name" + window.acsx;
            var accessLevel = "access_level" + window.acsx;

            $(wrapper).append('<div>Name: <br><input type="text" id="'+accessName+'" value="Admin"><br>Access level:<br><input type="number" id="'+accessLevel+'" value="9"><a href="#" class="delete_access">Delete this access level</a></div>'); //add input box
            window.accesslevels[window.acsx] = String(document.getElementById(accessLevel).value);
            window.acsx++;
        }
		else
		{
		alert('You Reached the limits')
		}
    });

    $(wrapper).on("click",".delete_access", function(e){
        e.preventDefault(); $(this).parent('div').remove();
        window.acsx--;
        window.accesslevels.splice(window.acsx,1);
    })
});

function saveAccess(){
  var select = document.getElementById('access_levels');
  select.options.length = 0;
  window.accesslevels[0] = String(document.getElementById('access_level').value);
  for (var i = 0; i < window.acsx; i++) {
    window.accesslevels[i+1] = String(document.getElementById('access_level' + i).value);
  }

  select = document.getElementById('access_levels');

  window.accesslevels.forEach(function(item){
    select.options[select.options.length] = new Option(item);
  });
};

// var options = '';
//
// for(var i = 0; i < accessnames.length; i++)
//   options += '<option value="'+accessnames[i]+'" />';
//
// document.getElementById('access-levels').innerHTML = options;

$(document).ready(function() {
    var max_fields      = 100;
    var wrapper         = $(".user");
    var add_button      = $(".add_form_field_user");

    window.userx = 0;
    $(add_button).click(function(e){
        e.preventDefault();
        if(window.userx < max_fields){
            var userName = "user_name" + window.userx;
            var userPass = "user_password" + window.userx;
            var s = "access_levels" + window.userx;

            $(wrapper).append('<div>Name: <br><input type="text" id="'+userName+'"><br>Password: <br><input type="password" id="'+userPass+'"><br>Access Level: <br><select id="'+s+'"></select><a href="#" class="delete_user">Delete this user</a></div>'); //add input box

            window.userx++;
            var sel = document.getElementById(s);

            window.accesslevels.forEach(function(item){
              sel.options[sel.options.length] = new Option(item);
            });
        }
		else
		{
		alert('You Reached the limits')
		}
    });

    $(wrapper).on("click",".delete_user", function(e){
        e.preventDefault(); $(this).parent('div').remove();
        window.userx--;
    })
});


// window.floornames = new Array();
$(document).ready(function() {
    var max_fields      = 100;
    var wrapper         = $(".service");
    var add_button      = $(".add_form_field_service");

    window.servx = 0;
    $(add_button).click(function(e){
        e.preventDefault();
        // window.floornames[0] = String(document.getElementById('floor-name').value);
        if(window.servx < max_fields){
            var servName = "service_name" + window.servx;
            // var floorHeight = "floor-height" + window.floorx;
            // var divisionName = "division-name" + window.floorx;

            $(wrapper).append('<div>Name: <br><input type="text" id="'+servName+'"><a href="#" class="delete_service">Delete this service</a></div>'); //add input box
            window.servx++;
        }
		else
		{
		alert('You Reached the limits')
		}
    });

    $(wrapper).on("click",".delete_service", function(e){
        e.preventDefault(); $(this).parent('div').remove();
        window.servx--;
        // window.floornames.splice(window.floorx,1); //TODO:does this work?
    })
});

</script>


<div class="floor w3-container" style="padding:0px 20px 16px">
  <fieldset>
    <legend> <h4>Floor list:</h4> </legend>
    <div>
    Floor name: <br>
    <input type="text" id="floor-name" value="Ground Floor"><br>
    Height Order: <br>
    <input type="number" id="floor-height" value="0"><br>
    <!-- Division Name on this floor: <br>
    <input type="text" id="division-name" value="Living Hall"> -->
    </div>
    <button class="add_form_field_floor">Add another floor &nbsp; <span style="font-size:16px; font-weight:bold;">+ </span></button>

 </fieldset>
</div>

<div class="w3-container" style="padding:0px 20px 16px">
  <input type="button" value="Save floor list" onclick="saveFloors()" class="w3-button w3-yellow w3-padding-large w3-medium w3-margin-top"><br>
</div>


<div class="division w3-container" style="padding:0px 20px 16px">
  <fieldset>
    <legend> <h4>Division list:</h4> </legend>
    <div>
    Division name: <br>
    <input type="text" id="division-name" value="Living Hall"><br>
    On floor: <br>
    <select id="floor-names"></select>
    </div>
    <button class="add_form_field_division">Add another division &nbsp; <span style="font-size:16px; font-weight:bold;">+ </span></button>
  </fieldset>
</div>

<div class="w3-container" style="padding:0px 20px 16px">
  <input type="button" value="Save division list" onclick="saveDivs()" class="w3-button w3-yellow w3-padding-large w3-medium w3-margin-top"><br>
</div>
<!-- TODO: this button be fake, please make it work -->


<!-- <script>
  // var list = document.getElementById('floor-names');
  //
  // window.floornames.forEach(function(item){
  //   var option = document.createElement('option');
  //   option.value = item;
  //   list.appendChild(option);
  // });

  function myFunction2() {
    // var x = document.getElementById("accesslevel");
    // var text = "";
    // var a = document.getElementById('access_name');

    // var accessnames = new Array();
    // accessnames[0] = String(document.getElementById('access_name').value);
    // accessnames[0] = String(a.value);

    // var i;
    // for (i = 0; i < x.length ;i++) {
    //   text += x.elements[i].value + "<br>";
    // }
    document.getElementById("demo").innerHTML = window.floornames;
  }
</script>


<button onclick="myFunction2()">Try it</button>

<p id="demo"></p> -->


<form class="accessLevel w3-container" style="padding:0px 20px 16px" id="accesslevel">
  <fieldset>
    <legend> <h4>Access level list:</h4> </legend>
    <div>
    Name: <br>
    <input type="text" id="access_name" value="Guest"><br>
    Access level: <br>
    <input type="number" id="access_level" value="0">
    </div>
    <button class="add_form_field_access">Add another access level &nbsp; <span style="font-size:16px; font-weight:bold;">+ </span></button>
  </fieldset>
</form>

<div class="w3-container" style="padding:0px 20px 16px">
  <input type="button" value="Save access list" onclick="saveAccess()" class="w3-button w3-yellow w3-padding-large w3-medium w3-margin-top"><br>
</div>
<!-- TODO: this button be fake, please make it work -->

<!-- <script>
  function myFunction2() {
    document.getElementById("demo").innerHTML = window.acsx;
  }
</script>


<button onclick="myFunction2()">Print ish</button>
<p id="demo"></p> -->



<div class="user w3-container" style="padding:0px 20px 16px" >
  <fieldset>
    <legend> <h4>Users list:</h4> </legend>
    <div>
    Name: <br>
    <input type="text" id="user_name" value="John"><br>
    Password: <br>
    <input type="password" id="user_password"><br>
    Access Level: <br>
    <select id="access_levels"></select>
    </div>
    <button class="add_form_field_user">Add another user &nbsp; <span style="font-size:16px; font-weight:bold;">+ </span></button>
  </fieldset>
</div>

<!-- <script type="text/javascript">

// var accessnames = new Array();
// accessnames[0] = String(document.getElementById('access_name').value);
// for(var i = 0; i < accessnames.length; i++)

  // var options = '';
  //
  // for(var i = 0; i < accessnames.length; i++)
  //   options += '<option value="'+accessnames[i]+'" />';
  //
  // document.getElementById('access_levels').innerHTML = options;


  // var list = document.getElementById('access_levels');
  //
  // window.accessnames.forEach(function(item){
  //    var option = document.createElement('option');
  //    option.value = item;
  //    list.appendChild(option);
  // });

  function myFunction3() {
    // var x = document.getElementById("accesslevel");
    // var text = "";
    // var a = document.getElementById('access_name');

    // var accessnames = new Array();
    // accessnames[0] = String(document.getElementById('access_name').value);
    // accessnames[0] = String(a.value);

    // var i;
    // for (i = 0; i < x.length ;i++) {
    //   text += x.elements[i].value + "<br>";
    // }
    document.getElementById("demo2").innerHTML = accessnames.item;
  }
</script> -->

<!-- <button onclick="myFunction3()">Try it</button>

<p id="demo2"></p> -->


<!-- <input name="car" list="anrede" />
<datalist id="anrede"></datalist>

<script>
var mycars = ['Herr','Frau'];
var list = document.getElementById('anrede');

mycars.forEach(function(item){
   var option = document.createElement('option');
   option.value = item;
   list.appendChild(option);
});
</script> -->


<div class="service w3-container" style="padding:0px 20px 16px">
  <fieldset>
    <legend> <h4>Service list:</h4> </legend>
    <div>
    Name: <br>
    <input type="text" id="service_name" value="Lighting">
  </div>
  <button class="add_form_field_service">Add another service &nbsp; <span style="font-size:16px; font-weight:bold;">+ </span></button>
  <!-- TODO: button is fake and doesn't work, the JS needs to be set-up -->
</fieldset>
</div>


<style>
.tooltip {
  position: relative;
  display: inline-block;
  border-bottom: 1px dotted black;
}

.tooltip .tooltiptext {
  visibility: hidden;
  width: 400px;
  background-color: black;
  color: #fff;
  text-align: center;
  border-radius: 6px;
  padding: 5px 5px;
  position: absolute;
  z-index: 1;
  bottom: 150%;
  left: 50%;
  margin-left: -60px;
}

.tooltip .tooltiptext::after {
  content: "";
  position: absolute;
  top: 100%;
  left: 50%;
  margin-left: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: black transparent transparent transparent;
}

.tooltip:hover .tooltiptext {
  visibility: visible;
}
</style>

<div class="w3-container" style="padding:0px 20px 16px">
  <fieldset>
    <legend> <h4>Value Types:</h4> </legend>

    <div class="scalar w3-container" style="padding:0px 20px 16px">
      <fieldset>
      <div class="tooltip">
        <legend> <h5>Scalar </h5></legend>
        <span class="tooltiptext">A “scalar” is an integer value that can be represented by 8 bits (for values from 0 to 255 or -128 to 127) or by 16 bits (for values from 0 to 65535 or -32768 to 32767).</span>
        <!--  TODO: add explanation-->
      </div>
      <div>
        <!--  TODO: add default values-->
        Name: <br>
        <input type="text" name="scalar_name" value="Intensity"><br>
        Number of bits: <br>
        <input list="numbits" name="numbits">
        <datalist id="numbits">
          <option value="8"></option>
          <option value="16"></option>
        </datalist><br>
        Unit: <br>
        <input type="text" name="" value="%"><br>
        Minimum Value: <br>
        <input type="number" name="" value="0"><br>
        Maximum Vlaue: <br>
        <input type="number" name="" value="100"><br>
        Step size: <br>
        <input type="number" name="" value="10"><br>
      </div>
      <button class="add_form_field_access">Add another scalar value type &nbsp; <span style="font-size:16px; font-weight:bold;">+ </span></button>
      <!-- TODO: button is fake and doesn't work, the JS needs to be set-up -->
      </fieldset>
    </div>


    <div class="enum w3-container" style="padding:0px 20px 16px">
      <fieldset>
      <div class="tooltip">
        <legend> <h5>Enumerated </h5></legend>
        <span class="tooltiptext">An “enumerated” value type corresponds to pairs "name, value" (value is represented by an 8 bit quantity).</span>
        <!--  TODO: add explanation-->
      </div>
      <div>
        <!--  TODO: add default values-->
        Name: <br>
        <input type="text" name="" value="state">
        <button class="add_form_field_access">Add another enumeration under this name &nbsp; <span style="font-size:16px; font-weight:bold;">+ </span></button> <br>
        <!-- TODO: button is fake and doesn't work, the JS needs to be set-up -->
        Name: <br>
        <input type="text" name="" value="off"><br>
        Value: <br>
        <input type="number" name="" value="0"><br>

      </div>
      <button class="add_form_field_access">Add another enumerated value type &nbsp; <span style="font-size:16px; font-weight:bold;">+ </span></button>
      <!-- TODO: button is fake and doesn't work, the JS needs to be set-up -->
      </fieldset>
    </div>

    <div class="array w3-container" style="padding:0px 20px 16px">
      <fieldset>
      <div class="tooltip">
        <legend> <h5>Array </h5></legend>
        <span class="tooltiptext">Array of bytes, usually used in cases where 16 bits are not enough.</span>
        <!--  TODO: add explanation-->
      </div>
      <div>
        <!--  TODO: add default values-->
        Name: <br>
        <input type="text" name="" value="Power consumption"><br>
        Maximum length: <br>
        <input type="number" name="" value="99999.99"><br>
      </div>
      <button class="add_form_field_access">Add another array value type &nbsp; <span style="font-size:16px; font-weight:bold;">+ </span></button>
      <!-- TODO: button is fake and doesn't work, the JS needs to be set-up -->
      </fieldset>
    </div>
</fieldset>
</div>

<div class="device_types w3-container" style="padding:0px 20px 16px">
  <fieldset>
    <legend> <h4>Device Types:</h4> </legend>
    <div>
    <!--  TODO: add default values-->
    Name: <br>
    <input type="text" name="" value="Temperature Sensor"><br>
    Description: <br>
    <input type="text" name="" value=""><br>
    Property name: <br>
    <input type="text" name="" value="Temperature">
    <button class="add_form_field_access">Add another property to this device type&nbsp; <span style="font-size:16px; font-weight:bold;">+ </span></button>
    <!-- TODO: button is fake and doesn't work, the JS needs to be set-up --> <br>
    Access Mode: <br>
    <input list="access_modes" name="access_modes">
    <datalist id="access_modes">
      <option value="Read and Write (RW)"></option>
      <option value="Read Only (RO)"></option>
      <option value="Write Only (WO)"></option>
    </datalist><br>
    <!-- TODO: save drop-down as Rw/Ro/wo  -->
    Value Type: <br>
    <input list="value_types" name="value_types">
    <datalist id="value_types">
      <option value="Scalar"></option>
      <option value="Enumerated"></option>
      <option value="Array"></option>
    </datalist><br>
    Referance to value type: <br>
    <input list="access_levels" name="user-access-level">
    <datalist id="access_levels"></datalist>
    <!-- TODO: drop-down doesn't work -->

  </div>
  <button class="add_form_field_access">Add another device type &nbsp; <span style="font-size:16px; font-weight:bold;">+ </span></button>
  <!-- TODO: button is fake and doesn't work, the JS needs to be set-up -->
  </fieldset>
</div>


<div class="device_list w3-container" style="padding:0px 20px 16px">
  <fieldset>
    <legend> <h4>Device list:</h4> </legend>
    <div>
    <!--  TODO: add default values-->
    Name: <br>
    <input type="text" name="" value=""><br>
    Device type: <br>
    <input list="access_levels" name="user-access-level">
    <datalist id="access_levels"></datalist><br>
    <!-- TODO: drop-down doesn't work -->
    Address:<br>
    <input type="text" name="" value=""><br>
    Division: <br>
    <input list="access_levels" name="user-access-level">
    <datalist id="access_levels"></datalist><br>
    <!-- TODO: drop-down doesn't work -->
    Access level: <br>
    <input list="access_levels" name="user-access-level">
    <datalist id="access_levels"></datalist><br>
    <!-- TODO: drop-down doesn't work -->
    User Blocked: <br>
    <input list="access_levels" name="user-access-level">
    <datalist id="access_levels"></datalist><br>
    <!-- TODO: drop-down doesn't work -->
  </div>
  <button class="add_form_field_access">Add another device &nbsp; <span style="font-size:16px; font-weight:bold;">+ </span></button>
  <!-- TODO: button is fake and doesn't work, the JS needs to be set-up -->
</fieldset>
</div>

<div class="scenario w3-container" style="padding:0px 20px 16px">
  <fieldset>
    <legend> <h4>Scenario list:</h4> </legend>
  <div>
    <!--  TODO: add default values-->
    Scenario Name: <br>
    <input type="text" name="" value=""><br>
    Action list:
    <button class="add_form_field_access">Add another action to this scenario &nbsp; <span style="font-size:16px; font-weight:bold;">+ </span></button> <br>
    <!-- TODO: button is fake and doesn't work, the JS needs to be set-up -->
    Device: <br>
    <input list="access_levels" name="user-access-level">
    <datalist id="access_levels"></datalist><br>
    <!-- TODO: drop-down doesn't work -->
    Property: <br>
    <input list="access_levels" name="user-access-level">
    <datalist id="access_levels"></datalist><br>
    <!-- TODO: drop-down doesn't work -->
    Value: <br>
    <input list="access_levels" name="user-access-level">
    <datalist id="access_levels"></datalist><br>
    <!-- TODO: drop-down doesn't work -->
  </div>
  <button class="add_form_field_access">Add another scenario &nbsp; <span style="font-size:16px; font-weight:bold;">+ </span></button>
  <!-- TODO: button is fake and doesn't work, the JS needs to be set-up -->
  </fieldset>
</div>

<div class="fav w3-container" style="padding:0px 20px 16px">
  <fieldset>
    <legend> <h4>Favourites list:</h4> </legend>
  <div>
    <!--  TODO: add default values-->
    User name: <br>
    <input list="access_levels" name="user-access-level">
    <datalist id="access_levels"></datalist><br>
    <!-- TODO: drop-down doesn't work -->
    Device or division list:
    <button class="add_form_field_access">Add another device or division to this user &nbsp; <span style="font-size:16px; font-weight:bold;">+ </span></button> <br>
    <!-- TODO: button is fake and doesn't work, the JS needs to be set-up -->
    Device: <br>
    <input list="access_levels" name="user-access-level">
    <datalist id="access_levels"></datalist><br>
    <!-- TODO: drop-down doesn't work -->
    Devision: <br>
    <input list="access_levels" name="user-access-level">
    <datalist id="access_levels"></datalist><br>
    <!-- TODO: drop-down doesn't work -->
  </div>
  <button class="add_form_field_access">Add another user &nbsp; <span style="font-size:16px; font-weight:bold;">+ </span></button>
  <!-- TODO: button is fake and doesn't work, the JS needs to be set-up -->
  </fieldset>
</div>



<!-- <script type="text/javascript">
  window.file = window.file + '</DomoBusSystem>';
</script> -->


<script type="text/javascript">

  function download() {
    // domobus
    window.file += '<DomoBusSystem ID="'+ String(document.getElementById('domobus-sys-id').value) + '" Name="' + String(document.getElementById('domobus-sys-name').value) +'" Version="' + String(document.getElementById('domobus-sys-version').value) +'" Date="' + String(document.getElementById('domobus-sys-date').value) +'"> \n';
// house structure
    window.file += '<House ID="'+ String(document.getElementById('house-structure-id').value) + '" Name="' + String(document.getElementById('house-name').value) +'" Address="' + String(document.getElementById('house-address').value) +'" Phone="' + String(document.getElementById('house-phone').value) +'"> \n';
// floor
    window.file += '  <FloorList> \n';
    window.file += '    <Floor ID="1" Name="' + String(document.getElementById('floor-name').value) + '" HeightOrder="' + String(document.getElementById('floor-height').value) + '" /> \n';
    var i;
    for (i = 0; i < window.floorx ;i++) {
      var id = i+2;
      window.file += '    <Floor ID="'+ id +'" Name="' + String(document.getElementById('floor-name'+i).value) + '" HeightOrder="' + String(document.getElementById('floor-height'+i).value) + '" /> \n';
    }
    window.file += '  </FloorList> \n';
// Division
    window.file += '  <DivisionList> \n';

    var x = document.getElementById("floor-names").selectedIndex;
    var y = document.getElementById("floor-names").options;
    var f = y[x].index+1;

    window.file += '    <Division ID="1" Name="' + String(document.getElementById('division-name').value) + '" RefFloor="'+ f +'" /> \n';
    for (i = 0; i < window.divx ;i++) {
      var id = i+2;
      x = document.getElementById('floor-names' + i).selectedIndex;
      y = document.getElementById('floor-names' + i).options;
      f = y[x].index+1;
      window.file += '    <Division ID="'+id+'" Name="' + String(document.getElementById('division-name'+i).value) + '" RefFloor="'+ f +'" /> \n';
    }

    window.file += '  </DivisionList> \n';
    window.file += '</House> \n';


    window.file += '<AccessLevelList> \n';
    window.file += '  <AccessLevel Level=“'+ String(document.getElementById('access_level').value) +'" Name=“'+ String(document.getElementById('access_name').value) +'" /> \n';
    for (i = 0; i < window.acsx ;i++) {
      window.file += '  <AccessLevel Level=“'+ String(document.getElementById('access_level'+i).value) +'" Name=“'+ String(document.getElementById('access_name'+i).value) +'" /> \n';
    }
    window.file += '</AccessLevelList> \n';

    window.file += '<UserList> \n';
    x = document.getElementById("access_levels").selectedIndex;
    y = document.getElementById("access_levels").options;
    // f = y[x].text;
    window.file += '  User ID="1" Name= "'+ String(document.getElementById('user_name').value) +'" Password="'+ String(document.getElementById('user_password').value) +'" AccessLevel="'+ String(y[x].text) +'" />\n';
    for (i = 0; i < window.userx ;i++) {
      var id = i+2;
      x = document.getElementById("access_levels"+i).selectedIndex;
      y = document.getElementById("access_levels"+i).options;
      // f = y[x].text;
      window.file += '  User ID="'+ id +'" Name= "'+ String(document.getElementById('user_name'+i).value) +'" Password="'+ String(document.getElementById('user_password'+i).value) +'" AccessLevel="'+ String(y[x].text) +'" />\n';
    }
    window.file += '</UserList> \n';

    window.file += '<ServiceList> \n';
    window.file += '  <Service ID=“1" Name="'+ String(document.getElementById('service_name').value) +'" /> \n';
    for (i = 0; i < window.servx ;i++) {
      var id = i+2;
      window.file += '  <Service ID=“'+ id +'" Name="'+ String(document.getElementById('service_name'+i).value) +'" /> \n';
    }
    window.file += '</ServiceList> \n';







    var filename = 'DomoBusSpec.xml';
    var text = window.file + '</DomoBusSystem>';
    var element = document.createElement('a');
    element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
    element.setAttribute('download', filename);

    element.style.display = 'none';
    document.body.appendChild(element);

    element.click();

    document.body.removeChild(element);
  }
</script>

<!-- <form onsubmit="download(this['name'].value, this['text'].value)">
  <input type="text" name="name" value="test.txt">
  <textarea name="text"></textarea>
  <input type="submit" value="Download">
</form> -->




<header class="w3-container w3-yellow w3-center" style="padding:50px">
  <!-- <h1>You're done!</h1> -->
  <p class="w3-medium">Check all your details and if you're done, press the button to create and download the XML file with all your given details.</p>
  <form onsubmit="download()">
    <!-- <input type="text" name="name" value="test.txt"> -->
    <!-- <textarea name="text"></textarea> -->
    <button type="submit" class="w3-button w3-black w3-padding-large w3-small w3-margin-top"><i class="fa fa-download"></i> Create and Download XML file</button>
  </form>
</header>




  <!-- Footer -->
  <!-- <footer class="w3-container w3-padding-64 w3-center w3-opacity"> -->
  <footer class="w3-container w3-black w3-center w3-opacity w3-padding-32">
    <!-- <div class="w3-xlarge w3-padding-32">
      <i class="fa fa-facebook-official w3-hover-opacity"></i>
      <i class="fa fa-instagram w3-hover-opacity"></i>
      <i class="fa fa-snapchat w3-hover-opacity"></i>
      <i class="fa fa-pinterest-p w3-hover-opacity"></i>
      <i class="fa fa-twitter w3-hover-opacity"></i>
      <i class="fa fa-linkedin w3-hover-opacity"></i>
   </div> -->
   <p>Powered by <a href="https://github.com/Ferbsx" target="_blank">Ferdous Nasri</a></p>
  </footer>


</html>
